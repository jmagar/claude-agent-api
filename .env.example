# ============================================================================
# REQUIRED SETTINGS
# ============================================================================

# API Authentication
API_KEY=your-api-key-for-clients

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================

DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:53432/claude_agent
DB_POOL_SIZE=10              # Connection pool size (5-50)
DB_MAX_OVERFLOW=20           # Max overflow connections (10-100)

# ============================================================================
# REDIS (Cache & Pub/Sub)
# ============================================================================

REDIS_URL=redis://localhost:53380/0
REDIS_SESSION_TTL=3600       # Session cache TTL in seconds (60-86400), default: 1 hour
REDIS_INTERRUPT_CHANNEL=agent:interrupts
REDIS_SESSION_CHANNEL=agent:sessions
REDIS_MAX_CONNECTIONS=50     # Redis max connections (5-200), default: 50
REDIS_SOCKET_CONNECT_TIMEOUT=5  # Redis socket connect timeout in seconds (1-30), default: 5
REDIS_SOCKET_TIMEOUT=5       # Redis socket timeout in seconds (1-30), default: 5

# ============================================================================
# API SERVER
# ============================================================================

API_HOST=0.0.0.0
API_PORT=54000
DEBUG=false                   # Enable debug mode (exposes /docs and /redoc)
CORS_ORIGINS=["*"]           # JSON array of allowed origins, wildcard only works with DEBUG=true
TRUST_PROXY_HEADERS=false    # Trust X-Forwarded-For header (only enable behind trusted proxy)

# ============================================================================
# ANTHROPIC API (OPTIONAL)
# ============================================================================

# ANTHROPIC_API_KEY=sk-ant-...
# NOTE: Do NOT set this if using Claude Max subscription - leave unset to use Claude Max auth

# ============================================================================
# LOGGING
# ============================================================================

LOG_LEVEL=INFO               # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_JSON=true                # Use JSON log format

# ============================================================================
# RATE LIMITING
# ============================================================================

RATE_LIMIT_REQUESTS=100           # Max requests per minute (general)
RATE_LIMIT_BURST=20               # Burst limit
RATE_LIMIT_QUERY_PER_MINUTE=10    # Query endpoint rate limit
RATE_LIMIT_SESSION_PER_MINUTE=30  # Session endpoint rate limit
RATE_LIMIT_GENERAL_PER_MINUTE=100 # General endpoint rate limit

# ============================================================================
# REQUEST SETTINGS
# ============================================================================

REQUEST_TIMEOUT=300          # Request timeout in seconds (10-600), default: 5 minutes
MAX_PROMPT_LENGTH=100000     # Maximum prompt length (1-500000)

# ============================================================================
# FILE CHECKPOINTING (requires Claude Code CLI)
# ============================================================================

ENABLE_FILE_CHECKPOINTING=false
CLAUDE_CODE_ENABLE_SDK_FILE_CHECKPOINTING=0
